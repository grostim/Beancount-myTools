#!/usr/bin/env python3
"""Example import configuration."""

# Insert our custom importers path here.
# (In practice you might just change your PYTHONPATH environment.)
import sys
from os import path
sys.path.insert(0, path.join(path.dirname(__file__)))

from importers.ImporterQIF import ImporterQIF
from importers.pdfbourso.pdfbourso import pdfbourso
from importers.pdfamex.pdfamex import pdfamex
from beancount.ingest import extract
from smart_importer import apply_hooks, PredictPayees, PredictPostings
from beancount.ingest.importers import ofx

import logging
logging.getLogger('smart_importer').setLevel(logging.DEBUG)

# Setting this variable provides a list of importer instances.

ACCOUNTLIST = {
        '00040754305'       : 'Actif:Boursorama:CCJoint',
        '00040132901'       : 'Actif:Boursorama:CCTim',
        '00040239557'       : 'Actif:Boursorama:CCAnna',
        '10014570396'       : 'Passif:Boursorama:CBJoint',
        '4979********1979'  : 'Passif:Boursorama:CBJoint',
        '10014935408'       : 'Passif:Boursorama:CBTim',
        '4979********1974'  : 'Passif:Boursorama:CBTim',
        'xxxx-xxxxxx-72001' : 'Passif:AirFrance:Amex',
    }

smart_ImporterQIF =  ImporterQIF(ACCOUNTLIST)
#apply_hooks(smart_ImporterQIF, [PredictPostings(), PredictPayees()])

CONFIG = [
     apply_hooks(ImporterQIF(ACCOUNTLIST), [PredictPostings(), ]),
     pdfbourso(ACCOUNTLIST),
     pdfamex(ACCOUNTLIST),
#     smart_ImporterQIF(),
#     ofx.Importer("4979********1979",
#                 "Passif:Boursorama:CBJoint",
#                 "test"),
]

# Override the header on extracted text (if desired).
extract.HEADER = ';; -*- mode: org; mode: beancount; coding: utf-8; -*-\n'

